using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using TMPro;
using UnityEngine.UI;

public class InventoryItemInfo : MonoBehaviour
{
    [Header("Elements")]
    [SerializeField] private Image icon;
    [SerializeField] private TextMeshProUGUI itemNameText;
    //[SerializeField] private TextMeshProUGUI recyclePriceText;

    [Header("Stats")]
    [SerializeField] private Transform statsParent;

    [Header("Buttons")]
    [SerializeField] private Button mergeButton;

    public void Configure(Weapon weapon)
    {
        Configure(weapon.weaponData.sprite, weapon.weaponData.Name + "(lvl: " + (weapon.level + 1) + ")", WeaponStatsCalculator.GetStats(weapon.weaponData, weapon.level));

        mergeButton.gameObject.SetActive(true);

        mergeButton.interactable = WeaponMerger.instance.CanMerge(weapon);

        mergeButton.onClick.RemoveAllListeners();
        mergeButton.onClick.AddListener(WeaponMerger.instance.Merge);
    }

    public void Configure(ObjectDataSO objectData)
    {
        Configure(objectData.Icon, objectData.Name, objectData.BaseStats);

        mergeButton.gameObject.SetActive(false);
    }

    private void Configure(Sprite itemIcon, string name, Dictionary<Stat, float> stats)
    {
        icon.sprite = itemIcon;
        itemNameText.text = name;

        StatContainerManager.GenerateStatContainers(stats, statsParent);
    }
}
